<!-- OneWayBinding.razor -->
@page "/sbindtest"

<div class="one-way-demo">
    <h3>单向绑定示例</h3>

    <!-- 显示数据，但不允许编辑 -->
    <div class="display-area">
        <p>计数器: <strong>@count</strong></p>
        <p>消息: <strong>@message</strong></p>
        <p>用户信息: <strong>@user.Name</strong> - <strong>@user.Age</strong>岁</p>
        <div>创建时间: @DateTime.Now.ToString("yyyy-MM-dd")</div>
    </div>

    <!-- 控制按钮 -->
    <div class="control-area">
        <button @onclick="Increment" class="btn btn-primary">增加计数</button>
        <button @onclick="ChangeMessage" class="btn btn-secondary">更改消息</button>
        <button @onclick="UpdateUser" class="btn btn-info">更新用户</button>
    </div>
</div>

<!-- 实时绑定（输入时立即更新） -->
<div class="real-time-demo">
    <h4>实时绑定示例</h4>

    <input @bind="searchText" @bind:event="oninput"
           placeholder="输入搜索内容..." />
    <p>实时搜索: @searchText</p>

    <!-- 对比默认行为 -->
    <input @bind="normalText" placeholder="默认绑定（失去焦点更新）" />
    <p>默认绑定: @normalText</p>
</div>


<TwoWayBinding />



@code {
    private int count = 0;
    private string message = "初始消息";
    private User user = new User { Name = "张三", Age = 25 };
    private string searchText = string.Empty;
    private string normalText = string.Empty;

    private void Increment()
    {
        count++;
        // StateHasChanged(); // 通常不需要手动调用，事件处理会自动触发重新渲染
    }

    private void ChangeMessage()
    {
        message = $"消息已更新: {DateTime.Now:HH:mm:ss}";
    }

    private void UpdateUser()
    {
        user = new User { Name = "李四", Age = 30 };
    }

    class User
    {
        public string Name { get; set; } = string.Empty;
        public int Age { get; set; }
    }
}